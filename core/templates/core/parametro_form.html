{% extends "base.html" %}
{% load static %}
{% block title %}Nuovo parametro vitale — RSA{% endblock %}

{% block content %}
<div class="card" style="max-width:920px;margin:auto;">
  <h2 style="margin-bottom:12px;">Inserisci Parametri Vitali</h2>

  <form method="post" novalidate>
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="badge danger" style="display:block;margin-bottom:12px;">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;">
      <div>
        <label><strong>{{ form.paziente.label }}</strong></label>
        {{ form.paziente }} {% for e in form.paziente.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>

      <div>
        <label><strong>{{ form.rilevato_il.label }}</strong></label>
        {{ form.rilevato_il }} {% for e in form.rilevato_il.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
        <small class="text-muted">Data e ora della rilevazione</small>
      </div>

      <div>
        <label><strong>PA MAX</strong></label>
        {{ form.pas }} {% for e in form.pas.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>
      <div>
        <label><strong>PA MIN</strong></label>
        {{ form.pad }} {% for e in form.pad.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>
      <div>
        <label><strong>B/m</strong></label>
        {{ form.fc }} {% for e in form.fc.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>
      <div>
        <label><strong>O₂ (%)</strong></label>
        {{ form.spo2 }} {% for e in form.spo2.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>
      <div>
        <label><strong>°C</strong></label>
        {{ form.temp_c }} {% for e in form.temp_c.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>
      <div>
        <label><strong>Glicemia (mg/dL)</strong></label>
        {{ form.glicemia_mgdl }} {% for e in form.glicemia_mgdl.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>

      <div style="grid-column:1/-1;">
        <label><strong>{{ form.variazione_terapia.label }}</strong></label>
        {{ form.variazione_terapia }} {% for e in form.variazione_terapia.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>

      <div style="grid-column:1/-1;">
        <label><strong>{{ form.note.label }}</strong></label>
        {{ form.note }} {% for e in form.note.errors %}<p class="badge danger">{{ e }}</p>{% endfor %}
      </div>
    </div>

    <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:16px;">
      <a class="btn" href="{% url 'dashboard' %}">Annulla</a>
      <button type="submit" class="btn btn-primary">Salva</button>
    </div>
  </form>
</div>

<script src="{% static 'core/js/parametri.js' %}"></script>
{% endblock %}
